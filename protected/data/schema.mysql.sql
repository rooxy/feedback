CREATE TABLE user (
    id INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(128) NOT NULL,
    password VARCHAR(128) NOT NULL,
    email VARCHAR(128) NOT NULL
)ENGINE=INNODB;

CREATE TABLE surveytype (
	id INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
	title VARCHAR(128) NOT NULL
)ENGINE=INNODB;

CREATE TABLE survey (
	id INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
	title VARCHAR(128) NOT NULL
)ENGINE=INNODB;

CREATE TABLE topic (
	id INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
	surveytype INTEGER NOT NULL,
	title VARCHAR(128) NOT NULL,

	FOREIGN KEY (surveytype) REFERENCES surveytype(id)
		ON DELETE RESTRICT
)ENGINE=INNODB;

CREATE TABLE survey_topic (
	id INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
	survey INTEGER NOT NULL,
	topic INTEGER NOT NULL,
	
	FOREIGN KEY (survey) REFERENCES survey(id)
		ON DELETE RESTRICT,
	FOREIGN KEY (topic) REFERENCES topic(id)
		ON DELETE RESTRICT
)ENGINE=INNODB;

CREATE TABLE opinion (
	id INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
	user INTEGER NOT NULL,
	topic INTEGER NOT NULL,
	survey INTEGER NOT NULL,
	text VARCHAR(1000) NOT NULL,

	FOREIGN KEY (user) REFERENCES user(id)
		ON DELETE RESTRICT,
	FOREIGN KEY (topic) REFERENCES topic(id)
		ON DELETE RESTRICT,
	FOREIGN KEY (survey) REFERENCES survey(id)
		ON DELETE RESTRICT
)ENGINE=INNODB;
